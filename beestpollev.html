<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="A simple element creator to generate responsive code that can be easily embbedded into Moodle">
    <meta name="author" content="T&M">
    <title>BEEST Poll Everywhere</title>
<link rel="icon" href="img/dragon-solid-favicon.png" type="image/gif">
    <!-- external link to css file --> 
    <!-- Bootstrap CSS -->   
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Arts CSS -->  
    <link rel="stylesheet" href="css/adminPlusSetuBlockStyle.css" />
    
    <!-- external link to js file -->  
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="  https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Bootstrap js file --> 
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- FontAwesome js file --> 
    <script src="https://kit.fontawesome.com/3817feae52.js"></script> 
    <!-- Tinymce js file -->   
    <script src='https://cloud.tinymce.com/stable/tinymce.min.js'></script>
	  <script src="js/advancedModeLocalStorage.js"></script>
    <script type="text/javascript">
   tinymce.init({
        selector: '#tinyMCEpollEv',
        menubar: false,
        plugins : 'advlist autolink link lists charmap print preview code',
          toolbar: 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | autolink link |lists | charmap | code | removeformat'  
      });
    function generatePollEvCode() {
         console.debug(tinyMCE.activeEditor.getContent());

        //Retrieve the content by id of the tinyMCE textarea
    var contextCode = tinyMCE.get('tinyMCEpollEv').getContent();
    var pollHeading = document.getElementById('pollHeading').value;
    var headSize = document.getElementById('headSize').value;
    var faIcon = document.getElementById('faCode').value;
    var head_3="<h3>"
    var endHead_3="</h3>"
    var head_4="<h4>"
    var endHead_4="</h4>"
    var head_5="<h5>"
    var endHead_5="</h5>"
        var iconNames = {
			      "1":"question",
            "2":"question-circle",
            "3":"question-circle-o", 
            "4":"bar-chart",
            "5":"pie-chart",
            "6":"line-chart",
            "7":"area-chart",
            "8":"bullhorn",
            "9":"balance-scale",
            "10":"comments-o",
            "11":"gavel",
        }

        var iconName = iconNames[faIcon];
		var faIconCode = "<i class=\"fa fa-"+iconName+"\"></i> ";
		
        if (faIcon == "noI"){
          faIconCode = "";
        }
		
		var resizedHead;
        //Resizing the heading text
		switch(headSize){
			case "noH":
				resizedHead = "";
				break;
			case "h3":
				resizedHead = head_3+faIconCode+pollHeading+endHead_3;
				break;
			case "h4":
				resizedHead = head_4+faIconCode+pollHeading+endHead_4;
				break;
			case "h5":
				resizedHead = head_5+faIconCode+pollHeading+endHead_5;
				break;
		}

        //Retrieve the content by id of the textareas
    var pollEv_URL = document.getElementById('pollEv_URL').value;
        var textOutputPollEv = resizedHead+divContainer+contextCode+pollEv_1+pollEv_URL+pollEv_2+closeContainer;
        document.getElementById('txtareapollEv').innerHTML=textOutputPollEv;
        SelectAll("txtareapollEv");
        $('#demo').nextAll('div, h3, h4, h5, i').remove();
        $('#demo').after(textOutputPollEv);
        }

    function SelectAll(id){
        document.getElementById(id).focus();
        document.getElementById(id).select();
        document.execCommand("copy");

        var popup = document.getElementById("myPopup");
        popup.classList.toggle("showPopup");
        //window.alert('test');
    }

    function submitform()
    {
        document.forms["myform"].submit();
    }
    $(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
    /* Variable Key
    These variables are pre-defined html that is added to inputs from users before and after to generate the final html product for copying and pasting.

   pollEv=poll everywhere
    */
    var divContainer="<div>"
    var pollEv_1="<iframe src=\""
    var pollEv_2="\" width=\"100%\" height=\"600\" frameBorder=\"0\"></iframe>"
    var closeContainer="</div>"
    </script>
    <script>   
      window.onload=function(){
        $('#beestNav').load('common/beestnav.html');
        $('#beestFooter').load('common/beestfooter.html');
        function activeNav() {
          var pgurl = window.location.href.substr(window.location.href.lastIndexOf("/")+1);
           $(".nav-link").each(function(){
                if($(this).attr("href") == pgurl || $(this).attr("href") == '' )
                $(this).addClass("active");
                $(this).append('<span class="sr-only">(current)</span>')
           });
      }
      
      setTimeout(function() {
          activeNav();
      }, 100);
    };
    </script>
    <script>   
      
     
    </script>
      <style>
        .mce-notification-inner, .mce-close, .mce-notification-warning {
        display:none !important;
        }

        /* Popup container - can be anything you want */
    #popup {
    position: relative;
    display: inline-block;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    }

    /* The actual popup */
    #popup .popuptext {
    visibility: hidden;
    width: 220px;
    background-color: #555;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 10px 5px;
    position: absolute;
    z-index: 1;
    bottom:100%;
    left: 50%;
    margin-left: -110px;
    }

    /* Popup arrow */
    #popup .popuptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
    }

    /* Toggle this class - hide and show the popup */
    #popup .showPopup {
    -webkit-animation: fadeinout 4s linear forwards;
    animation: fadeinout 4s linear forwards;
    visibility: visible;
    }
  
    /* Add animation (fade in the popup) */
@-webkit-keyframes fadeinout {
  0%,100% { opacity: 0; }
  10% {opacity: 1;}
  66% { opacity: 1; }
}

@keyframes fadeinout {
  0%,100% { opacity: 0; }
  10% {opacity: 1;}
  66% { opacity: 1; }
}

.tooltip-inner {
  text-align: left;
  padding: 15px;
  font-size: 1.05rem;
  max-width: 420px;
}
    </style>  
    </head>
    <body>
 <div id="beestNav"></div>
      <div class="container-fluid">
        <div class="w-100 mx-auto alert alert-arts alert-dismissible fade show rounded" role="alert">
            <div class="h6"><i class="fa fa-fw fa-2x fa-pull-left fa-exclamation-circle"></i>You can only produce the embed code for one (1) poll at a time on this page. You will need to paste the code for each poll into Moodle, then come back to this page, refresh it and start again.</div>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
            </div>     
          <h1 class="text-center"><i class="fa fa-poll fa-fw"></i> Embed Poll Everywhere Activities/Surveys</h1>
          <div class="row w-100 mx-auto">
            <div class="col-lg mt-2">
              <div class="hideableinstruct">
          <h5>The result of this process</h5>
          <p>This process will generate embed code for Poll Everywhere activites using the shareable link available in your Poll Everywhere account. To get the link for your poll activity <a href="" data-toggle="modal" data-target=".pollev-modal">follow these steps</a> (will appear as an overlay on this screen).</p>
<div class="modal fade pollev-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content">
    <div class="row w-100 p-3 mx-auto">
        <div class="col-lg-11">
          <h5><i class="fa fa-fw fa-link"></i> Get the shareable link for your poll</h5>
            <ol class="mb-0">
                <li>Go to <a href="https://www.polleverywhere.com/activities" target="_blank">Poll Everywhere</a> and login.</li>
                <li>Click on the <strong>Actions</strong> menu of an already created item and choose <strong>Copy response link</strong>.</li>
                <li>Return to the BEEST and paste this link in Step 1.</li>
                </ol>
        </div>
            <div class="col-lg-1 p-0">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <p class="mr-2" style="font-size: 2rem;" aria-hidden="true">&times;</p>
    </button></div>
        </div>
</div>
</div>
</div>     
          <h5>How to use this page</h5>
          <p>If you hover your mouse over the headings for the steps on this page instructions will appear. Once you have generated and copied the code for your element paste them into Moodle using the HTML editor. If you are unsure of how to paste HTML into Moodle,  <a data-toggle="modal" data-target=".bd-example-modal-lg" href="">this short video will help</a> (it will open in an overlay on this screen).</p>
          <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content p-2">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">To close this window click the button on the right or anywhere outside this box.</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
              <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=d1c0ffaa-23a4-4d38-bb49-abda00b7805a"></iframe></div>
              </div>
            </div>
          </div>	</div>
          <h5>Refresh this page</h5>
          <div class="row w-100">
            <div class="col-lg">
          <p>Click this button to refresh this page if you make an error, or if you are making multiple elements and have already pasted your previous elements.</p></div>
          <div class="col-lg-3"><div class="text-center">
            <a href="javascript:window.location.reload()" class="btn btn-mu">Refresh the page <i class="fa fa-fw fa-refresh"></i></a>
          </div></div></div>

	<h5>Advanced mode - turn <span class="onoffswapinstr">off</span> instructions</h5>
        <div class="row w-100">
          <div class="col-lg">
        <p>Click this button to turn <span class="onoffswapinstr">off</span> the instructions that appear when you hover over the headings.<span class="hideableinstruct"> Only do this if you are completely familiar with how to use the tool.</span></p></div>
        <div class="col-lg-3"><div class="text-center">
          <button onclick="flipTooltip()" class="btn btn-mu">Turn <span class="onoffswapinstr">off</span> instructions <i class="fa fa-fw fa-power-off"></i></a>
        </div></div></div></div>
        <div class="col-lg-4 mt-2 hideableinstruct">
          <h5>Video walkthrough - Creating a Poll Everywhere activity/survey embed code (2:36)</h5>
          <div class="embed-responsive embed-responsive-16by9">
            <iframe src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=8326f205-50f4-4495-94cd-ac3f0040366d" class="embed-responsive-item" frameborder="1" allowfullscreen="true"></iframe>
          </div>
          </div>
        </div>
     <hr class="hr-3">
       <form id="pollEv">    
        <div class="row w-100 mx-auto mt-2">
          <div class="col-lg-8">
              <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Paste in your polls shareable link. You can get this link by following the instructions from the top of the page. Click on the text that says 'follow these steps' to reveal the instructions.">Step 1 - Paste response link URL</h5>
              <textarea class="rounded p-2 w-100" rows="1" name="pollEv_URL" id="pollEv_URL" placeholder="Write/paste the Shareable response link here"></textarea>
              </div>
              </div> 
              <div class="row w-100 mx-auto">
                <div class="col-lg-8 mt-2">
                  <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Type the heading for this poll. 75 character maximum.">Step 2 - Heading (optional)</h5>
                  <textarea maxlength="75" class="rounded p-2 w-100" rows="1" name="pollHeading" type="text" id="pollHeading" placeholder="Type your poll heading here"></textarea>
                </div>
              </div>
      <div class="row w-100 mx-auto">
      <div class="col-lg-8 mt-2">
        <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose the size of your heading. No heading is chosen by default. If you do not choose a heading size, your heading will not display.">Step 3 - Heading size (optional)</h5>
              <select class="custom-select w-50 border border-dark" id="headSize" name="headSize" size="1">
              <option selected value="noH">No heading</option>
              <option value="h5">Small (h5)</option>
              <option value="h4">Medium (h4)</option>
              <option value="h3">Large (h3)</option>
            </select>
            </div> 
          </div>   
          <div class="row w-100 mx-auto">
            <div class="col-lg-8 mt-2">
              <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose an icon to go with your heading. No icon is selected by default. If you want an icon, you must also write a heading (step 2) and choose a heading size (step 3) or the icon and heading will not display.">Step 4 - Select icon (optional)</h5>
              <select class="custom-select w-50 border border-dark" id="faCode" name="faCode" size="1">
                <option selected value="noI">No icon</option>
                  <option value="1">Question mark</option>
                  <option value="2">White question mark in a black circle</option>
                  <option value="3">Black question mark in a white circle</option>
                  <option value="4">Bar chart</option>
                  <option value="5">Pie chart</option>
                  <option value="6">Line chart</option>
                  <option value="7">Area chart</option>
                  <option value="8">Megaphone/bullhorn</option>
                  <option value="9">Set of scales</option>
                  <option value="10">Two speech bubbles</option>
                  <option value="11">Gavel</option>
                </select>
              </div>
            </div>
    <div class="row w-100 mx-auto mt-2">
    <div class="col-lg-8">
        <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="If you already have written the context for your poll in Moodle, skip this step, generate the embed code for your poll and paste it after your context in Moodle. Otherwise, writing some instructions, or context for students on your poll will help the students to respond correctly. Write your context in the space below. You can use headings, bold, italics and lists if needed in your instructions.">Step 5 - Write the context for the poll (optional)</h5>
        <textarea class="mb-3 rounded p-2 w-100" cols="70" rows="3" name="pollEv_text" id="tinyMCEpollEv" placeholder="Write/paste the text for the button here"></textarea>
      </div>
    </div>
        
       
      
        <div class="row w-100 mx-auto mt-2">
        <div class="col-lg-8">
          <h5 class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Click this button to generate and copy the code for your element ready for pasting in Moodle. A preview of the element will appear under Step 7.">Step 6 - Generate/copy code</h5>
        <div><p id="popup"> <span class="popuptext" id="myPopup">Your code has been copied</span> <input type="button" class="m-1 btn btn-arts" name="copyCode" value="Click to generate and copy code" onClick=generatePollEvCode()></input></div>
           <textarea readonly class="rounded p-2 w-100" id="txtareapollEv" cols="70" rows="3" name="Result" placeholder="Code for your element will appear here."></textarea>
        </div>
    </div>
    <div class="row w-100 mx-auto mt-2 mb-3">
      <div class="col-lg">
        <h5 style="width:33.33%;" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="A preview of your element will appear below when you click the generate code button in Step 6.">Step 7 - Preview</h5>
        </div>
        </div>
      
    <script>//code for converting textarea to readonly on paste
    $('#pollEv_URL').on('input', function(event) {
    
    $('input[type="text"], #pollEv_URL').attr('readonly','readonly');
  }); 
  </script>
  <script>
    var textarea = $('#pollHeading');
    var select = $('#headSize');
    var addOrRemoveRequiredAttribute = function () {
    if (textarea.val().length) {
    select.val("h5")
    }
    };
    
    // Run now
    addOrRemoveRequiredAttribute();
    
    // And when textarea changes
    textarea.on('change', addOrRemoveRequiredAttribute);
    </script>
    </form>
    <div id="demo"></div>
    <span class="my-3"></span>
  </div>

    <div id="beestFooter"></div> 
  </body>
    </html>
