<!--
==========================================
 Title:       Image Page
 Creator:     @mattchen
 Last Update: 3 Oct 2020
==========================================
-->
<html ng-app="driveApp">
<head>
  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="A simple element creator to generate responsive code that can be easily embbedded into Moodle">
    <meta name="author" content="T&M">
    <title>BEEST Image</title>
     <link rel="icon" href="img/dragon-solid-favicon.png" type="image/gif">
    <!-- external link to css file --> 
    <!-- Bootstrap CSS -->   
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Arts CSS -->  
    <link rel="stylesheet" href="css/adminPlusSetuBlockStyle.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/monashElements.css" />
    <!-- external link to js file -->  
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="  https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <!-- Bootstrap js file --> 
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- FontAwesome js file --> 
    <script src="https://kit.fontawesome.com/3817feae52.js"></script> 
    <!-- Tinymce js file -->   
    <script src='https://cloud.tinymce.com/stable/tinymce.min.js'></script>
    <script src="js/advancedModeLocalStorage.js"></script>
    <!-- TinyMCE placeholder plugin file -->
    <script src="js/placeholder.js"></script> 
    <script>
    window.gapiCallbacks=[];

    function gapiLoaded(){
      gapi.auth.init(function() {
        gapi.client.load('drive', 'v2').then(function () {
          var GapiQueue = function () {
            this.push = function (callback) {
              setTimeout(callback, 0);
            };
          };

          var _old_gapiCallbacks = window.gapiCallbacks;

          window.gapiCallbacks = new GapiQueue();

          _old_gapiCallbacks.forEach(function (callback) {
            window.gapiCallbacks.push(callback);
          });
        },function(reason){
          console.err(reason);
        });
      });
    }

    // The Browser API key obtained from the Google API Console.
    var developerKey = 'AIzaSyDc_XZvzDg7_zvLL_yZXG-hoa_2QA6MU6E';

    // The Client ID obtained from the Google API Console.
    var clientId = "97361103722-bs8u1e0lp7rnati4703leav6b4nknhg7.apps.googleusercontent.com"

    // See "Project number" under "IAM & Admin" > "Settings"
    var appId = "97361103722";

    // Scope to use to access user's Drive items.
    var scope = ['https://www.googleapis.com/auth/drive.file'];

    var pickerApiLoaded = false;
    var oauthToken;

    // Use the Google API Loader script to load the google.picker script.
    function loadPicker() {
      gapi.load('auth', {'callback': onAuthApiLoad});
      gapi.load('picker', {'callback': onPickerApiLoad});
    }
    
    // Load API key
    function onAuthApiLoad() {
      window.gapi.auth.authorize(
          {
            'client_id': clientId,
            'scope': scope,
            'immediate': false
          },
          handleAuthResult);
    }
    
    //Load Google Drive Picker
    function onPickerApiLoad() {
      pickerApiLoaded = true;
      createPicker();
    }

    function handleAuthResult(authResult) {
      if (authResult && !authResult.error) {
        oauthToken = authResult.access_token;
        createPicker();
      }
    }

    // Create and render a Picker object for searching images.
    function createPicker() {
      if (pickerApiLoaded && oauthToken) {
        var view = new google.picker.View(google.picker.ViewId.DOCS);
        view.setMimeTypes("image/png,image/jpeg,image/jpg");
        var picker = new google.picker.PickerBuilder()
            .enableFeature(google.picker.Feature.NAV_HIDDEN)
            .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
            .setAppId(appId)
            .setOAuthToken(oauthToken)
            .addView(view)
            .addView(new google.picker.DocsUploadView())
            .setDeveloperKey(developerKey)
            .setCallback(pickerCallback)
            .build();
         picker.setVisible(true);
      }
    }

    var imageplaceholder ="https://drive.google.com/uc?id=1Tel_KpnwCcoRUMdMFyw-GJ-_MaqeaWYZ&export=download";
    var url;
    url = imageplaceholder;

    // A simple callback implementation.
    function pickerCallback(data) {
      if (data.action == google.picker.Action.PICKED) {
        var fileId = data.docs[0].id;
        url = 'https://drive.google.com/uc?id=' + fileId + '&amp;export=download';
        document.getElementById('img').src = url;
        var imagepreview = document.getElementById("imagepreview");
        imagepreview.style.display = "block";
        //var imgpreview = document.getElementById("img2");
        //imgpreview.style.display = "none";
        generateCode();
      }
    }
    
    function writeinMoodle() {
      tinyMCE.get('#id_introeditor').setContent(textOutput);
    }

    tinymce.init({
        selector: '#tinyMCEimage',
        menubar: false,
        plugins : 'advlist autolink link lists charmap print preview code placeholder',
        placeholder:'[Placeholder for image context. The content you entered in step 2 will appear here.]',
        toolbar: 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | autolink link |lists | charmap | code | removeformat',
        setup : function(ed) {      
        ed.on('change', function (e) {	
          generateCode();
          });	
        /*ed.on('init', function(e){
          if (tinymce.get('tinyMCEimage').getContent() == ''){
          tinymce.get('tinyMCEimage').setContent("<p id='#imThePlaceholder' style='opacity:0.6'>[Placeholder for image context. The content you entered in step 2 will appear here.]</p>");
          }
        });
        //and remove it on focus
        ed.on('focus',function(e){
            $('iframe').contents().find('#imThePlaceholder').remove();
        })*/			
      }
    });
    
   	/*These different options have been absorbed into a javascript Object allowing a direct mapping and lookup of code to icon name*/
	
    function iconpreview() {
        var faIcon = document.getElementById('faCode').value;
        var iconNames = {
			      "1":"image",
            "2":"play",
            "3":"eye" 
        }

        var iconName = iconNames[faIcon];
	     	var faIconCode = "<i id=\"icon\" class=\"fa fa-"+iconName+"\"></i> ";
		
        if (faIcon == "noI"){
          faIconCode = "";
          if (document.getElementById("icon"))
           {
            var icon = document.getElementById("icon");
            icon.parentNode.removeChild(icon);
            var iconpreview = document.getElementById("iconpreview");
            iconpreview.style.display = "none";
           }
        }

        else{
          if (document.getElementById("icon"))
          {
            var icon = document.getElementById("icon");
            icon.parentNode.removeChild(icon);
          }

          var code = document.createElement("span");
          code.innerHTML = faIconCode;
          var iconpreview = document.getElementById("iconpreview");
          iconpreview.style.display = "block";
          iconpreview.parentNode.insertBefore(code,iconpreview.nextSibling);
        }
        generateCode();
      }

    function copyCode(){
      SelectAll("txtarearespImg");
    }

    var contextCode;

    /*Function to generate and copy code for the responsive image*/
    function generateCode() {
        // Get the HTML contents of the currently active editor
        console.debug(tinyMCE.activeEditor.getContent());

        if (document.getElementById('respImgSwitch').value !== ""){
        url = document.getElementById('respImgSwitch').value;
        }
        else{
        url = "https://drive.google.com/uc?id=1Tel_KpnwCcoRUMdMFyw-GJ-_MaqeaWYZ&export=download";
        }

        //Retrieve the content by id of the tinyMCE textarea
        if (tinyMCE.get('tinyMCEimage').getContent() !== ""){
        contextCode = tinyMCE.get('tinyMCEimage').getContent();
        }
        else{
        contextCode = "[Placeholder for image context. The content you entered in step 2 will appear here.]";
        }

        var imgHeading = document.getElementById('respImgHeading').value;
        var imgWidth = document.getElementById('imageWidth').value;
        var imgPosition = document.getElementById('imagePosition').value;
        var headSize = document.getElementById('headSize').value;
        var faIcon = document.getElementById('faCode').value;

        var head_3="<h3>"
        var endHead_3="</h3>"
        var head_4="<h4>"
        var endHead_4="</h4>"
        var head_5="<h5>"
        var endHead_5="</h5>"

        var rowOpen="<div class=\"row w-100\">"
        var firstCol="<div class=\"col-lg\">"
        var imgTag = "<img class=\"img-fluid\" src=\""
        var firstCol4="<div class=\"col-lg-4\">"
        var firstCol3="<div class=\"col-lg-3\">"
        var secCol="<div class=\"col-lg mt-2\">"
        var secCol4="<div class=\"col-lg-4 mt-2\">"
        var secCol3="<div class=\"col-lg-3 mt-2\">"
        var closeCol="\"></div>"
        var closeCol_r="</div>"
        var closeRow="</div></div>"
        var closeRow_r="\"></div></div>"

        var respImg_1="<div class=\"row w-100\"><div class=\"col-lg\">"
        var respImg_2="</div><div class=\"col-lg\"><img class=\"img-fluid\" src=\""
        var respImg_2r="<img class=\"img-fluid\" src=\""
        var respImg_3="\"></div></div>"
        var respImg_3r="\"></div>"
        var respImg_4="<div class=\"col-lg mt-2\">"
        var respImg_5="</div></div>"

        var iconNames = {
			      "1":"image",
            "2":"play",
            "3":"eye" 
        }

        var iconName = iconNames[faIcon];
	     	var faIconCode = "<i class=\"fa fa-"+iconName+"\"></i> ";
		
        if (faIcon == "noI"){
          faIconCode = "";
        }  

    		var resizedHead;  
    
        if(imgHeading == ""){
          resizedHead = "";
        }
        else{
            //Resizing the heading text
        switch(headSize){
          case "h3":
            resizedHead = head_3+faIconCode+imgHeading+endHead_3;
            break;
          case "h4":
            resizedHead = head_4+faIconCode+imgHeading+endHead_4;
            break;
          case "h5":
            resizedHead = head_5+faIconCode+imgHeading+endHead_5;
            break;
        }
      }
    
        //Change size of column if requested
        if (imgWidth == "33" && imgPosition == "left"){
          firstCol=firstCol4;
        }
        else if (imgWidth == "33" && imgPosition== "right"){
          secCol=secCol4;
        }
        else if (imgWidth == "25" && imgPosition== "left"){
          firstCol=firstCol3;
        }
        else if (imgWidth == "25" && imgPosition== "right"){
          secCol=secCol3;
        }

          if (url !== imageplaceholder)
          {
          }
          else
          {
            url = imageplaceholder;
          }

        if (imgPosition == "left"){
            //var textOutput = resizedHead+respImg_1+respImg_2r+url+respImg_3r+respImg_4+contextCode+respImg_5;
            var textOutput = resizedHead+rowOpen+firstCol+imgTag+url+closeCol+secCol+contextCode+closeRow;
        }
        else if (imgPosition == "right"){
            //var textOutput = resizedHead+respImg_1+contextCode+respImg_2+url+respImg_3;
            var textOutput = resizedHead+rowOpen+firstCol+contextCode+closeCol_r+secCol+imgTag+url+closeRow_r;
        }

        document.getElementById('txtarearespImg').innerHTML=textOutput;
        //SelectAll("txtarearespImg");
         //Add the html code after the div
		    var demoDiv = document.getElementById("demo");
		    demoDiv.innerHTML = textOutput;
        }

      //var textarea = $('#respImgHeading');
      //var select = $('#headSize');
      //var addOrRemoveRequiredAttribute = function () {
      //if (textarea.val().length) {
      //  select.val("h5")
     // }
      //};

      // Run now
     // addOrRemoveRequiredAttribute();

      // And when textarea changes
    //  textarea.on('change', addOrRemoveRequiredAttribute);

    function SelectAll(id){
        document.getElementById(id).focus();
        document.getElementById(id).select();
        document.execCommand("copy");
        var popup = document.getElementById("myPopup");
        popup.classList.toggle("showPopup");
    }
 

    function submitform()
    {
        document.forms["myform"].submit();
    }
    $(function () {
  $('[data-toggle="tooltip"]').tooltip()
});

  </script>
  <!-- Load the Google API Loader script. -->
  <script type="text/javascript" src="https://apis.google.com/js/api.js?onload=onApiLoad"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>

  <script src="js/drive-controller.js"></script>
  <script src="js/gapi-auth-service.js"></script>
  <script src="js/drive-service.js"></script>
  <!--<script>   
    window.onload=function(){
      generateCode();
      $('#beestNav').load('common/beestnav.html');
      $('#beestFooter').load('common/beestfooter.html');
      function activeNav() {
        var pgurl = window.location.href.substr(window.location.href.lastIndexOf("/")+1);
         $(".nav-link").each(function(){
              if($(this).attr("href") == pgurl || $(this).attr("href") == '' )
              $(this).addClass("active");
              $(this).append('<span class="sr-only">(current)</span>');
         });
    }
    
    setTimeout(function() {
        activeNav();
    }, 100);
  };
  </script>-->
  <style>
    .mce-notification-inner, .mce-close, .mce-notification-warning {
    display:none !important;
    }
    .tooltip-inner {
      text-align: left;
      padding: 15px;
      font-size: 1.05rem;
      max-width: 400px;
    }
    .modal-backdrop {
      z-index: 0 !important;
    }
    </style> 
</head>
<body>
    <div id="beestNav"></div>
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-arts mb-3">
		<a class="navbar-brand text-center border border-white p-2 rounded" href="index.html"><img src="img/dragon-solid-white.png" width="30" height="30" alt=""></a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
		  <span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNavDropdown">
		  <ul class="navbar-nav">
			<li class="nav-item">
			  <a class="nav-link" href="index.html">Home</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beestvideo.html">Video</a>
      </li>
      <li class="nav-item">
			  <a class="nav-link active" href="beestimage.html">Image <span class="sr-only">(current)</span></a>
			</li>
			<li class="nav-item">
			<a class="nav-link" href="beestbutton.html">Button</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beestalert.html">Alert</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beesttable.html">Table</a>
			</li>
			   <li class="nav-item">
			  <a class="nav-link" href="beestpolleverywhere.html">Poll Everywhere</a>
			</li>
			   <li class="nav-item">
			  <a class="nav-link" href="beestreadmore.html">Read More Button</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beestaccordion.html">Accordion</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beesttabbedcontent.html">Tabbed Content</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="beestquote.html">Quote</a>
			</li>
      <li class="nav-item d-none">
				<a class="nav-link" href="beestexamples.html">Examples</a>
			  </li>
		  </ul>
		  <ul class="navbar-nav">
			<li class="nav-item">
			  <a class="nav-link" href="beestsupport.html">Support <i class="fa fa-question-circle-o"></i></a>
			</li>
		  </ul>
    </div>
	  </nav>
  <div class="py-5"></div>
<div class="container-fluid">
<h3 class="text-center"><i class="fa fa-image"></i> Responsive image + context <span data-toggle="tooltip" data-placement="bottom" data-trigger="hover focus" title="Upload an image from one of the listed platforms and input some context or text around the image. Then choose the size of the image, and which side of the screen you would like it on." class="hideableinstruct text-success font-weight-bold"> | What does this page do?</span></h3>
<h5 class="text-center"><a class="hideableinstruct" data-toggle="modal" data-target=".respImgWalkthrough" href="">Create a responsive image & context</a></h5>
<div class="modal fade respImgWalkthrough" tabindex="-1" role="dialog" aria-labelledby="panopto-modal" aria-hidden="true">
<div class="modal-dialog modal-lg">
  <div class="modal-content p-2 bg-dark">
    <div class="modal-header">
      <h5 class="modal-title text-white" id="exampleModalLabel">Click close or click outside this box to return to the BEEST.</h5>
      <button type="button" class="btn btn-outline-light btn-lg ml-2" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">Close &times;</span>
      </button>
    </div>
  <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=cef099bc-a7e9-4211-be3c-ac3e005c0924"></iframe></div>
  </div>
</div>
</div>
<div class="row w-50 mx-auto text-center mt-2">
  <div class="col-lg mt-2">
        <a data-toggle="tooltip" data-placement="bottom" data-trigger="hover focus" title="Click this button to clear the page and start again." href="javascript:window.location.reload()" class="btn btn-mu btn-lg btn-block" role="button">Clear the page <i class="fa fa-fw fa-refresh"></i></a>
      </div>
      <div class="col-lg mt-2">
        <button id="toggleHelp" data-toggle="tooltip" data-placement="bottom" data-trigger="hover focus click" title="Click this button to toggle the help instructions on the page on/off. Only do this if you are completely familiar with how to use the page" onclick="flipTooltip()" class="btn btn-mu btn-lg btn-block">Turn <span class="onoffswapinstr">off</span> help <i class="fa fa-fw fa-power-off"></i></a>
      </div></div>
        <!--<ul>
          <li><a data-toggle="modal" data-target=".unsplash-modal" href="">Unsplash</a>
            <div class="modal fade unsplash-modal" tabindex="-1" role="dialog" aria-labelledby="panopto-modal" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content p-2">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">To close this window click the button on the right or anywhere outside this box.</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
              <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=b84fa926-7531-4321-8f0b-ac2c0000d69d"></iframe></div>
              </div>
            </div>
          </div></li>
          <li><a data-toggle="modal" data-target=".pexels-modal" href="">Pexels</a>
            <div class="modal fade pexels-modal" tabindex="-1" role="dialog" aria-labelledby="youtube-modal" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content p-2">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">To close this window click the button on the right or anywhere outside this box.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=98282461-8b14-48fb-a4d2-ac2c0000d672"></iframe></div>
                </div>
              </div>
            </div></li>
          <li><a data-toggle="modal" data-target=".stocksnap-modal" href="">StockSnap</a>
            <div class="modal fade stocksnap-modal" tabindex="-1" role="dialog" aria-labelledby="ted-modal" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content p-2">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">To close this window click the button on the right or anywhere outside this box.</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=d27cc54b-dd5e-4436-b862-ac2c0000d623"></iframe></div>
                </div>
              </div>
            </div></li>
        </ul>-->
        <hr class="hr-3">
  
<form id="respImg">   
   <div class="row w-100 mx-auto">
    <div class="col-lg-6 mt-2">
    <div class="row w-100 mx-auto">
      <div class="col-lg-3">
        <h6>Image link</h6>
        <div data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Paste in the link/URL (not the embed code) for your image." class="font-weight-bold text-success hideableinstruct">Hover for help</div>
        </div>
        <div class="col-lg">
        <p>Find your image from <a href="https://unsplash.com" target="_blank">Unsplash</a>/<a href="https://www.pexels.com" target="_blank">Pexels</a>/<a href="https://stocksnap.io/" target="_blank">StockSnap</a> and paste the URL here</p>
        <!--<a data-toggle="modal" data-target=".panopto-modal" href="">search an image here</a>
            <div class="modal fade panopto-modal" tabindex="-1" role="dialog" aria-labelledby="panopto-modal" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content p-2">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">To close this window click the button on the right or anywhere outside this box.</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
              <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=b84fa926-7531-4321-8f0b-ac2c0000d69d"></iframe></div>
              </div>
            </div>
          </div>-->
          <textarea class="rounded p-2 w-100" rows="1" name="respImgSwitch" type="text" id="respImgSwitch" placeholder="Paste the Unsplash/Pexels/StockSnap image link here" onchange=generateCode()></textarea>
       <!-- <p id="popup"><span class="popuptext" id="myPopup">Please paste a valid link from Unsplash/Pexels/StockSnap</span></p>-->
        </div>
        
        <div ng-controller="driveController">        
          <!--<div ng-show="checkingLogin">Checking login status...</div>
          Login status:{{loggedIn}}
          <button ng-disabled="checkingLogin || loggedIn" ng-click="login()">Log In</button>-->
        
          <div ng-show="loggedIn">
            <input ng-disabled="uploading" ng-click="clickFileUpload()" type="button" class="btn btn-arts m-1" name="uploadImage" value="Upload image" >
            <!--<button ng-disabled="uploading" ng-click="clickFileUpload()">Upload image</button>-->
            <input type="button" class="btn btn-arts m-1" name="uploadImage" value="Choose Image from Google Drive" onclick="loadPicker()">
            <!--<button onclick="loadPicker()">Choose Image from Google Drive</button>-->
            <input type="file" id="uploadImage" accept="image/*" onchange="angular.element(this).scope().upload()" style="display:none;">
            <div ng-show="uploading">Uploading image to your Google Drive ...</div>    
            <!--<div ng-show="!images.length">No uploaded images yet</div>-->
            <div ng-repeat="image in images" style="max-width:800px;max-height:800px;">
              <img id ="img2" ng-src="{{image}}" style="max-width: 100%;max-height: 100%;">
            </div>
          </div>
          <hr>
    <div class="row w-100 mx-auto">
      <div class="col-lg-3">
        <h6>Image context</h6>
        <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Giving the image some context helps users to understand what the image is trying to communicate. Or you can type text you would like to go alongside the image.">Hover for help</div>
      </div>
      <div class="col-lg">
            <textarea id="tinyMCEimage" class="border border-dark rounded p-2 w-100" cols="70" rows="3" name="respVid_context"></textarea>
    </div>
   </div>

      <!--<div class="col-lg-3">
        <h5 id="imagepreview" class="w-50" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" style="display:none;">Image Preview</h5>
        <img id="img" src="" style="max-width:100%;max-height:100%;">
      </div>-->
    </div>
  </div>
  <hr>
      <div class="row w-100 mx-auto">
        <div class="col-lg-3">
          <h6>Image position</h6>
          <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose which side of screen you would prefer the image to appear on.">Hover for help</div>
          </div>
          <div class="col-lg">
                <select class="custom-select border border-dark" id="imagePosition" name="imagePosition" size="1" onchange=generateCode()>
                <option value="right" selected>Image on the right</option>
                <option value="left">Image on the left</option>
              </select>
              </div> 
            </div> 
<hr>
            <div class="row w-100 mx-auto">
              <div class="col-lg-3">
                <h6>Image width</h6>
                <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose whether you want the image to be 50% (1/2) of the screen width or 33.3% (1/3) of the screen width.">Hover for help</div>
              </div>
              <div class="col-lg">
                      <select class="custom-select border border-dark" id="imageWidth" name="imageWidth" size="1" onchange=generateCode()>
                      <option value="50" selected>50% (1/2)</option>
                      <option value="33">33.3% (1/3)</option>
                      <option value="25">25% (1/4)</option>
                    </select>
                    </div> 
                  </div> 
<hr>
            <div class="row w-100 mx-auto">
              <div class="col-lg-3">
                <h6>Heading</h6>
                <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Type the heading for this image. 50 character maximum. If you want a heading, you must also complete step 5 or your heading will not display.">Hover for help</div>
                </div>
                <div class="col-lg">
                <textarea maxlength="50" class="rounded p-2 w-100" rows="1" name="respVid_heading" type="text" id="respImgHeading" placeholder="Type your image heading here" onchange=generateCode()></textarea>
              </div>
            </div>
<hr>
    <div class="row w-100 mx-auto">
    <div class="col-lg-3">
      <h6>Heading size</h6>
      <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose the size of your heading. If you do not choose a heading size, your heading will not display.">Hover for help</div>
    </div>
    <div class="col-lg">
            <select class="custom-select border border-dark" id="headSize" name="headSize" size="1" onchange=generateCode()>
            <!--<option selected value="noH">No heading</option>-->
            <option selected value="h5">Small (heading 5)</option>
            <option value="h4">Medium (heading 4)</option>
            <option value="h3">Large (heading 3)</option>
          </select>
          </div> 
        </div>   
        <hr>
        <div class="row w-100 mx-auto">
          <div class="col-lg-3">
            <h6>Select heading icon</h6>
            <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="Choose an icon to go with your heading. If you want an icon, you must also write a heading and choose a heading size or the icon and heading will not display.">Hover for help</div>
            </div>
            <div class="col-lg">
            <select class="custom-select border border-dark" id="faCode" name="faCode" size="1" onchange=generateCode()>
              <option selected value="noI">No icon</option>
                <option value="1">Image</option>
                <option value="2">Play</option>
                <option value="3">Eye</option>
              </select>
            </div>
            </div>
          </div> 
<div class="col-lg-6 mt-2">
  <div class="sticky-top" style="top:80px;">
            <h6>Preview</h6>
            <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="hover focus" title="A preview of your element will appear here as you update your preferences on the page.">Hover for help</div>
          <div id="demo" class="row w-100 mb-3 mx-auto">                     
          </div>
          <hr>
       <h6>Copy code</h6>
       <div class="font-weight-bold text-success hideableinstruct" data-toggle="tooltip" data-placement="right" data-trigger="focus hover" title="Click this button to copy the code for your element ready for pasting in Moodle.">Hover for help</div>
       
        <textarea readonly class="rounded p-2 w-100 mt-2" id="txtarearespImg" cols="70" rows="3" name="Result" placeholder="Code for your element will appear here"></textarea>
        <input type="button" class="btn btn-lg btn-block btn-arts mt-3" name="GenerateWrap" value="Copy your code </>" onClick=copyCode() />
        <div class="text-center h5 mt-4">
          <a data-toggle="modal" data-target=".html-paste-modal" href="#">How do I paste this into Moodle?</a>
          <div class="modal fade html-paste-modal mt-5" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
              <div class="modal-content p-2 bg-dark">
                <div class="modal-header">
                  <h5 class="modal-title text-white">Click close or click outside this box to return to the BEEST.</h5>
                  <button type="button" class="btn btn-outline-light btn-lg ml-2" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">Close &times;</span>
                  </button>
                </div>
              <div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" frameborder="0" allowfullscreen="allowfullscreen" src="https://monash-panopto.aarnet.edu.au/Panopto/Pages/Embed.aspx?id=d1c0ffaa-23a4-4d38-bb49-abda00b7805a"></iframe>
              </div>
              </div>
            </div>
          </div></div>
        
        <!--<input type="button" class="btn btn-arts m-1" name="GenerateWrap" value="Write back to Moodle" onClick=writeinMoodle() >-->
    
      </div>
    </div>
    </form>

    <p class="my-3"></p>
  </div>

<script src="https://apis.google.com/js/client.js?onload=gapiLoaded"></script>
<script type="text/javascript" src="https://apis.google.com/js/api.js"></script>

<script>
    $('#respImgSwitch').on('input', function(event) {
    var s = $('#respImgSwitch').val().toString();

    if (s.includes("unsplash.com") == true) {
    //code for replacing unplash link with embed code
    var x = s.replace('https://unsplash.com/photos','https://source.unsplash.com');
    }

    else if (s.includes("pexels.com") == true) {
    //code for replacing stocksnap link with embed code
    var y = s.replace('https://www.pexels.com/photo/','');
    var x = y.replace('/','');
    //use regular expression to find the id number
    var pexelsid = x.match(/\d+/)[0];
    var x = "https://images.pexels.com/photos/" + pexelsid + "/pexels-photo-" + pexelsid + ".jpeg";
    }

    else if (s.includes("stocksnap.io") == true) {
    //code for replacing unplash link with embed code
    var y = s.replace('https://stocksnap.io/photo/','https://cdn.stocksnap.io/img-thumbs/960w/');
    //use regular expression to convert the last - to _
    var x = y.replace(/-([^-]*)$/,'_$1') + ".jpg"
    }

    else{
    var popup2 = document.getElementById("myPopup2");
    popup2.classList.toggle("showPopup");
    }

    $('#respImgSwitch').val(x);
    //$('input[type="text"], textarea#respVidSwitch').attr('readonly','readonly');
  }); 
</script>
<!--<script>var textarea = $("#alertHeading");
  var radioBtn = $("#headSize1");
  var checkRadio = function(){
      if (textarea.val().length) {
        $("#headSize1").prop("checked", true);
        generateAlertCode();
      };
  };
  // Run now
  // And when textarea changes
  textarea.on("change", checkRadio);
  </script>-->
<script>
  $(function () {
    $(document).on('shown.bs.tooltip', function (e) {
       setTimeout(function () {
         $(e.target).tooltip('hide');
       }, 10000);
    });
  });</script>
  <script>
    $(function () {
      $('#copyCodeBtn').on('click', function (e) {
         setTimeout(function () {
           $(e.target).tooltip('hide');
         }, 2000);
      });
    });
    $(function () {
      $('#toggleHelp').on('click', function (e) {
         setTimeout(function () {
           $(e.target).tooltip('hide');
         }, 2000);
      });
    });
    </script>
<footer class="bg-arts text-white w-100">
  <nav class="navbar navbar-expand navbar-dark bg-arts fixed-bottom">   
      <a class="navbar-brand text-center border border-white p-2 rounded" href="index.html"><img src="img/dragon-solid-white.png" width="30" height="30" alt=""></a>  
        <ul class="navbar-nav">
          <span class="navbar-text"><i class="fa fa-copyright" aria-hidden="true"></i> Monash University 2020</span>
          <li class="nav-item mx-2">
              <a class="nav-link" href="https://docs.google.com/forms/d/e/1FAIpQLSeojgdmy3o6gUq1ZzuV3Q2YflUDfxH4TKKzz5lbpTJLmLOm5w/viewform?usp=sf_link" target="_blank">Feedback/Improvements/Issues</a>
          </li>
           <li class="nav-item">
              <a class="nav-link" href="https://mail.google.com/mail/u/0/?view=cm&amp;fs=1&amp;to=beest@monash.edu&amp;su=Question%20about%20BEEST%20tool" target="_blank">Contact BEEST support<span class="sr-only">(current)</span></a>
          </li>
          </ul>
  </nav>
</footer>

<div id="beestFooter"></div>
</body>
</html>